# Oxide WDNS 默认配置文件

# 服务器监听地址
listen_addr: 127.0.0.1:3053

# 上游 DNS 服务器配置
upstream:
  # 是否启用 DNSSEC
  enable_dnssec: true

  # 查询超时时间（秒）
  query_timeout: 30

  # 上游解析器列表
  resolvers:
    # Cloudflare DNS (UDP)
    - address: 1.1.1.1:53
      protocol: udp

    # Google DNS (UDP)
    - address: 8.8.8.8:53
      protocol: udp

    # Cloudflare DNS-over-TLS
    # 格式：域名@IP:端口
    - address: cloudflare-dns.com@1.1.1.1:853
      protocol: dot

    # Cloudflare DNS-over-HTTPS
    # 必须以 https:// 开头
    - address: https://cloudflare-dns.com/dns-query
      protocol: doh

    # Google DNS TCP（示例）
    # - address: 8.8.8.8:53
    #   protocol: tcp

    # Google DoT（示例）
    # - address: dns.google@8.8.8.8:853
    #   protocol: dot

# 缓存配置
cache:
  # 是否启用缓存
  enabled: true

  # 缓存条目数量上限
  size: 10000

  # 最小 TTL（秒）
  min_ttl: 60

  # 最大 TTL（秒，1天）
  max_ttl: 86400

  # 负缓存 TTL（秒，5分钟）
  negative_ttl: 300

# 速率限制配置
rate_limit:
  # 是否启用速率限制
  enabled: true

  # 每个 IP 每秒最大请求数
  per_ip_rate: 100

  # 单个 IP 的并发请求数限制
  per_ip_concurrent: 10
